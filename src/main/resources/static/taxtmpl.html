<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  	<link rel="stylesheet" type="text/css" href="/css/nprogress.css">
  	<link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css">
	<link rel="stylesheet" type="text/css" href="/css/modules.min.css">
	<link rel="stylesheet" type="text/css" href="/css/scrolltabs.css">
	<link rel="stylesheet" type="text/css" href="/css/report.css">
<style>
	.right-column-content-container {min-width: 1000px;}
	.ui.form .field input {padding: 0.5em;}
	.plain-text {font-weight: normal; font-size: 0.9em;}
</style>
	<title>Next Generation Smart FMS Platform</title>
</head>
<body>
<div class="ui fixed main secondary small blue inverted menu" id="topMenu">
	<div class="ui container">
		<a class="tracking enabled item"><i class="road icon"></i> Vehicle Tracking</a>
		<a class="fuel report enabled item"><i class="bar chart icon"></i> Fuel Efficiency</a>
		<a class="filling report enabled item"><i class="chart line icon"></i> Filling</a>
		<a class="draining report item"><i class="chart line icon"></i> Draining</a>
		<a class="vehicle tax active enabled item"><i class="yellow tasks icon"></i> Vehicle Tax</a>
		<div class="right menu">
			<a class="ui logout item" href="/login.html" title="Sign out"><i class="sign-out icon"></i></a>
		</div>
	</div>
</div>

<div class="main-container">
	<div class="left-column">
		<div class="ui raised segment">
			<div class="ui blue top attached label">Vehicle Tax Management</div>
			<div class="left-column-content-container">
				<div class="ui blue vertical fluid secondary pointing small menu" id="taxSubMenu">
					<a class="payment task item"><i class="bell icon"></i>Vehicle Tax Payment Task</a>
					<a class="active tax template item"><i class="copy icon"></i>Payment Task Templates</a>
	   			</div>
	   		</div>
		</div>
	</div>
	<div class="right-column">
		<div class="right-column-content-container">
			<div class="ui right aligned basic segment" style="padding-bottom: 0; margin: 0;">
				<div class="ui basic tiny buttons">
					<div class="ui compact icon add button" title="Add new template"><i class="orange plus squre icon"></i></div>
					<div class="ui compact icon remove button" title="Remove selected template"><i class="red minus squre icon"></i></div>
				</div>
			</div>
			<table class="ui celled teal striped compact small table" id="tmplListTable" style="margin-top: 0.5em;">
				<thead>
				<tr><th class="center aligned">Service Title</th><th class="center aligned">Description</th><th class="center aligned">View Detail(Edit)</th></tr>
				</thead>
				<tbody></tbody>
			</table>		
		
		</div><!-- end of right column content container -->
	</div><!--  end of right column -->
</div><!-- end of main -->
<div class="ui segment modal" id="templateModal">
	<div class="ui small form">
		<div class="fields">
			<div class="five wide field">
				<label>Service Title</label>
				<input type="text" name="title" placeHolder="Enter service title">
			</div>
							
			<div class="eleven wide field">	
				<label>Description</label>
				<input type="text" name="description" placeHolder="Enter service description">
			</div>
		</div>
		<div class="fields">
			<div class="eight wide field">
				<div class="ui vhc-cert segment">
					<div class="ui blue top attached label"><i class="car icon"></i> Vehicle Certificate</div>
					<div class="inline fields">
						<label>Schedule ends on Every :</label>
						<div class="field"><div class="ui radio checkbox"><input type="radio" name="certificationInterval" value="1"><label>1 year</label></div></div>
						<div class="field"><div class="ui radio checked checkbox"><input type="radio" name="certificationInterval" value="5"><label>5 years</label></div></div>
					</div>
					<div class="inline fields">
						<label>Payment &nbsp;Cost:</label>
						<div class="field"><input type="text" name="certificationCost" class="certcost-input" placeholder="0.00" style="text-align: right;"> RP</div>
					</div>
					<div class="inline fields">
						<label>Remind Before:</label>
						<div class="field"><input type="number" name="certificationRemindBeforeDays" placeholder="0" min="0" style="text-align: right;"> days</div>
					</div>
					<div class="ui horizontal divider"><i class="alarm icon"></i> <span class="plain-text"> Notification</span></div>
					<div class="fields">
						<div class="eight wide field"><label><i class="comments alternate icon"></i>SMS notification</label><input type="text" name="certNotificationSms"></div>
						<div class="eight wide field"><label><i class="envelope icon"></i>Email notification</label><input type="text" name="certNotificationEmail"></div>
					</div>
				</div>
			</div><!--  end of vehicle certification segment containing field-->
			<div class="eight wide field">
				<div class="ui vhc-tax segment">
					<div class="ui blue top attached label"><i class="money bill alternate outline icon"></i> Vehicle Tax</div>
					<div class="inline fields">
						<label>Schedule ends on Every :</label>
						<div class="field"><div class="ui radio checked checkbox"><input type="radio" name="taxInterval" value="1"><label>1 year</label></div></div>
						<div class="field"><div class="ui radio checkbox"><input type="radio" name="taxInterval" value="5"><label>5 years</label></div></div>
					</div>
					<div class="inline fields">
						<label>Payment &nbsp;Cost:</label>
						<div class="field"><input type="text" name="taxCost" class="taxcost-input" placeholder="0.00" style="text-align: right;"> RP</div>
					</div>
					<div class="inline fields">
						<label>Remind Before:</label>
						<div class="field"><input type="number" name="taxRemindBeforeDays" placeholder="0" min="0" style="text-align: right;"> days</div>
					</div>
					<div class="ui horizontal divider"><i class="alarm icon"></i><span class="plain-text"> Notification</span></div>
					<div class="fields">
						<div class="eight wide field"><label><i class="comments alternate icon"></i>SMS notification</label><input type="text" name="taxNotificationSms"></div>
						<div class="eight wide field"><label><i class="envelope icon"></i>Email notification</label><input type="text" name="taxNotificationEmail"></div>
					</div>
				</div>
			</div><!--  end of vehicle tax segment containing field-->
		</div>
		<div class="field">
			<div class="ui small message"><i class="hand point right outline icon"></i>Notifications will always be available on web interface UI</div>
		</div>
		<div class="error-description field"></div>
		<div class="field">
			<div style="text-align: center;">
				<div class="ui blue right labeled icon small basic save compact button">Save<i class="save icon"></i></div>
				<div class="ui right labeled icon small basic close compact button">Close <i class="x icon"></i></div>
			</div>	
		</div>
	</div>
</div>
<script src="/js/nprogress.js"></script>
<script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery.tablesort.min.js"></script>
<script src="/js/modules.min.js"></script>
<script src="/js/cleave.min.js"></script>
<script src="/js/common.api.js"></script>
<script src="/js/common.js?v=1.1"></script>
<script>
var TaxServiceApi = {
	apiBase:'/vhctax/api',
	createTemplateUri: '/tmpl/create',
	createPaymentTemplate: function(tmplJson, callback) {
		Api.postJson(this.apiBase + this.createTemplateUri, tmplJson, callback, function(response) {
			FormUI.displayMsgIn($form, 'Failed due to communication error!');
		});
	}
};
function saveTemplate() {
	$form.form("validate form");
	if(!$form.form('is valid')) return;
	var svcTmpl = $form.form('get values');
	TaxServiceApi.createPaymentTemplate(svcTmpl, function(response) {
		if(response.success) {
			console.log(response.payload);
			hideModal();
		} else {
			FormUI.displayMsgIn($form, response.status.description);
		}
	});
}
function showModal() {
	$form.form('clear');
	$('.ui.radio.checked.checkbox').checkbox('set checked');
	$templateModal.modal("show");
}
function hideModal() {
	$templateModal.modal("hide");
	FormUI.resetMsgIn($form);
}
var $templateModal, $form;
$(function() {
	$(".ui.radio.checkbox").checkbox();
	$templateModal = $("#templateModal");
	$templateModal.modal({dimmerSettings:{opacity: 0.3}, autofocus:false, closable:false});
	$form = $templateModal.find(".ui.form");
	$form.form({fields: {title:'empty', description:'empty', certificationCost:'number', certificationCost:'empty', taxCost:'empty'}});
	
	$form.find(".ui.button").click(function() {
		var $this = $(this);
		if($this.hasClass("close")) {
			$templateModal.modal('hide');
		} else if($this.hasClass("save")) {
			saveTemplate();
		}
	});
	$(".ui.add.button").click(showModal);
	var cleave = new Cleave('.taxcost-input', {
	    numeral: true,
	    numeralThousandsGroupStyle: 'thousand'
	});
	cleave = new Cleave('.certcost-input', {
	    numeral: true,
	    numeralThousandsGroupStyle: 'thousand'
	});
	
});
</script>
</body>
</html>